title Making a resource request

opt not yet registered
User->API Gateway:Register
activate API Gateway#lightgray

API Gateway->Account Management:Account details
activate Account Management#lightgray

Account Management->Account Management:save
Account Management-->User:Account details
deactivate Account Management
end

User->API Gateway:Login

API Gateway->Account Management:<align:center>username\npassword
activate Account Management#lightgray

Account Management->Account Management:Authenticate

alt success
Account Management-->User:JWT

else
Account Management-->User:Send error (401 Unauthorized)
end
deactivate Account Management

User->API Gateway:<align:center>Resource request\nHeader: JWT
API Gateway->API Gateway:Authorize

alt success
API Gateway->Microservice:Resource request
activate Microservice#lightgray
Microservice-->User:Response
deactivate Microservice

else
API Gateway-->User:Send error (403 Forbidden)
end

bottomparticipants
